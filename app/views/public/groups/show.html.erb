<div class="container">
  <div class="row">
    <div class="col-5 bg-user">
      <h2 class="mt-3 text-center">オーナー</h2>
      <div class="heading-line"></div>
      <%= render 'public/users/info', user: @owner %>
    </div>
    <div class="col-6 offset-1">
      <div class="container">
        <div class="row">
          <h2 class="mt-3 text-center">グループ詳細</h2>
          <div class="heading-line"></div>
        </div>
        <div class="row">
          <div class="col">
            <table class="table mt-2 table-borderless">
              <tr>
                <th>グループ名</th>
                <td><%= @group.name %></td>
              </tr>
              <tr>
                <th>紹介文</th>
                <td><%= @group.introduction %></td>
              </tr>
              <tr>
                <th>メンバー</th>
                <td class="d-flex flex-wrap">
                  <% @group.users.each do |user| %>
                    <ul class="list-group">
                      <li class="list-group-item ml-1 d-flex justify-content-start align-items-center" style="list-style:none;">
                        <%= image_tag user.get_profile_image, size: '50x50', style: "object-fit: contain; border-radius: 50%;" %>
                        <span><%= user.name %></span>
                      </li>
                    </ul>
                  <% end %>
                </td>
              </tr>
            </table>
          </div>
        </div>
        <div class="row">
            <% if @group.owner_id == current_user.id %>
              <%= link_to '編集', edit_group_path(@group), class: "btn  btn-success" %>
            <% else %>
              <% if @group.include_user?(current_user) %>
                <%= link_to "グループから退会する", group_group_users_path(@group), method: :delete, class: "btn btn-danger" %>
              <% else %>
                <%= link_to "グループに参加する", group_group_users_path(@group), method: :post, class: "btn btn-success" %>
              <% end %>
            <% end %>
        </div>
        <div class="row mt-3">
          <% if @room.present? %>
            <%= link_to "チャットルームへ",group_rooms_path(@group, @room), class: "btn btn-primary" %>
          <% else %>
            <% if @group.include_user?(current_user)  %>
              <%= form_with(model: [@group, @room],local: true) do |f| %>
                <%= f.hidden_field :group_id, value: @group.id %>
                <%= f.submit "チャットルームへ",class: "btn btn-primary" %>
              <% end %>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
